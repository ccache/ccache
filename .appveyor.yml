# Simple versioning scheme
version: {build}

# Check compilation both on 32 and 64 bit platforms
platform:
    - x64
    - x86

# Try compilation with the three current compilers available
image:
    - Visual Studio 2015
    - Visual Studio 2017
#   - Visual Studio 2013

# Run AppVeyor only on the windows branch, until we are merged to trunk
branches:
    only:
        - windows

# Stops on first failing combination
matrix:
  fast_finish: true

environment:

install:
    - MSYS pacman -S --needed --noconfirm autoconf make perl

build_script:
    - C:\Program Files (x86)/Microsoft Visual Studio 12.0\VC\bin\x86_amd64\vcvarsx86_amd64.bat
    - MSYS export LC_ALL=C
    - MSYS ./autogen.sh
    - MSYS ./configure
    - MSYS make

test_script:
    - MSYS make test
